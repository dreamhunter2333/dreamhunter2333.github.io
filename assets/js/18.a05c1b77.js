(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{573:function(t,s,a){"use strict";a.r(s);var e=a(10),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"code-server在线编辑器-in-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#code-server在线编辑器-in-docker"}},[t._v("#")]),t._v(" code-server在线编辑器 in docker")]),t._v(" "),a("h3",{attrs:{id:"从-ubuntu18-构建镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-ubuntu18-构建镜像"}},[t._v("#")]),t._v(" 从 ubuntu18 构建镜像")]),t._v(" "),a("blockquote",[a("p",[t._v("编写Dockerfile")])]),t._v(" "),a("div",{staticClass:"language-Dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("latest\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("LABEL")]),t._v(" author=jinmu333\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用阿里源")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" sed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("i s/archive.ubuntu.com/mirrors.aliyun.com/g /etc/apt/sources.list && \\\n    sed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("i s/security.ubuntu.com/mirrors.aliyun.com/g /etc/apt/sources.list\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get update "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y && apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get upgrade "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get install "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y locales\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" locale"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("gen zh_CN\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" locale"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("gen zh_CN.utf8\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("locale LANG=zh_CN.UTF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("8 LC_ALL=zh_CN.UTF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("8 LANGUAGE=zh_CN.UTF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("8\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get update "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y && apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get upgrade "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENV")]),t._v(" LANG zh_CN.UTF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("8\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENV")]),t._v(" LANGUAGE zh_CN.UTF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("8\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENV")]),t._v(" LC_ALL zh_CN.UTF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("8\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get install sudo vim curl zsh wget nano psmisc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get update "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y && apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get upgrade "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get install python3 python3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pip screenfetch git "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get update "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y && apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get upgrade "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENV")]),t._v(" SHELL=/bin/zsh\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" sh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("c "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get update "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y && apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get upgrade "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("USER")]),t._v(" root\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WORKDIR")]),t._v(" /opt/odoo\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# build image")]),t._v("\ndocker build -f Dockerfile -t code_server:1.0 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n")])])]),a("h3",{attrs:{id:"docker-compose-启动-code-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-启动-code-server"}},[t._v("#")]),t._v(" docker-compose 启动 code-server")]),t._v(" "),a("p",[t._v("编写 "),a("code",[t._v("docker-compose.yml")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("code_server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" code_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" code_server\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4000:4000"')]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8080:8080"')]),t._v("\n")])])]),a("p",[t._v("启动 "),a("code",[t._v("docker-compose")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("docker-compose -f docker-compose.yml up\n")])])]),a("h3",{attrs:{id:"访问-localhost-8080"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问-localhost-8080"}},[t._v("#")]),t._v(" 访问 localhost:8080")]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/code-server/code_server.jpg",alt:"code-server"}})])])}),[],!1,null,null,null);s.default=n.exports}}]);